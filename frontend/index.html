<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Welcome Block (shown when no data) -->
        <div id="welcomeBlock" class="welcome-block hidden">
            <div class="welcome-content">
                <div class="welcome-icon">üìö</div>
                <h1 class="welcome-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–∞—à–±–æ—Ä–¥ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏!</h1>
                <p class="welcome-description">
                    –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Ü–µ–Ω–∫–∞—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ —É–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è.
                </p>
                
                <div class="welcome-form">
                    <div class="form-section">
                        <h3>1. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                        <p class="form-hint">–í—ã–±–µ—Ä–∏—Ç–µ CSV –∏–ª–∏ Excel —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –æ—Ü–µ–Ω–∫–∞—Ö</p>
                        <label for="welcomeFileInput" class="file-input-label">
                            <input type="file" id="welcomeFileInput" accept=".csv,.xlsx,.xls" style="display: none;">
                            <span class="file-input-button">üìÅ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</span>
                            <span id="welcomeFileName" class="file-name">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
                        </label>
                        <p class="import-hint">–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏: student_id, student_name, subject, grade, date</p>
                    </div>
                    
                    <div class="form-section">
                        <h3>2. –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è</h3>
                        <p class="form-hint">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –≤ –≤–∞—à–µ–º —É—á–µ–±–Ω–æ–º –∑–∞–≤–µ–¥–µ–Ω–∏–∏</p>
                        <div class="grading-system-options">
                            <label class="radio-label">
                                <input type="radio" name="gradingSystem" value="5-point" checked>
                                <span>5-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (2, 3, 4, 5)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="gradingSystem" value="100-point">
                                <span>100-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (0-100)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="gradingSystem" value="custom">
                                <span>–î—Ä—É–≥–∞—è —Å–∏—Å—Ç–µ–º–∞</span>
                            </label>
                        </div>
                        <div id="customGradingInputs" class="custom-grading-inputs hidden">
                            <div class="input-group">
                                <label for="minGrade">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:</label>
                                <input type="number" id="minGrade" step="0.1" placeholder="0">
                            </div>
                            <div class="input-group">
                                <label for="maxGrade">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:</label>
                                <input type="number" id="maxGrade" step="0.1" placeholder="100">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button id="startImportBtn" class="btn-primary btn-large" disabled>
                            –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content (shown when data is loaded) -->
        <div id="mainContent" class="main-content">
        <!-- Header -->
        <header class="header">
            <h1>üìä –î–∞—à–±–æ—Ä–¥ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h1>
            <p class="subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Ü–µ–Ω–∫–∞—Ö</p>
        </header>

        <!-- Filters Section -->
        <section class="filters-section">
            <div class="filters-row">
                <div class="filter-group">
                    <label for="studentFilter">–°—Ç—É–¥–µ–Ω—Ç:</label>
                    <select id="studentFilter">
                        <option value="">–í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="subjectFilter">–ü—Ä–µ–¥–º–µ—Ç:</label>
                    <select id="subjectFilter">
                        <option value="">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="startDateFilter">–° –¥–∞—Ç—ã:</label>
                    <input type="date" id="startDateFilter">
                </div>
                <div class="filter-group">
                    <label for="endDateFilter">–ü–æ –¥–∞—Ç—É:</label>
                    <input type="date" id="endDateFilter">
                </div>
            </div>
            <div class="buttons-row">
                <button id="refreshBtn" class="btn-primary btn-full">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                <button id="importBtn" class="btn-primary btn-import-main btn-full">üì§ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                <button id="exportBtn" class="btn-primary btn-export-main btn-full">üì• –≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤</button>
                <button id="exportCsvBtn" class="btn-primary btn-export-csv btn-full">üìÑ –≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                <button id="exportPdfBtn" class="btn-primary btn-export-pdf btn-full">üìë –≠–∫—Å–ø–æ—Ä—Ç PDF</button>
            </div>
        </section>

        <!-- Statistics Cards -->
        <section class="stats-section">
            <div class="stats-grid" id="statsGrid">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
            </div>
        </section>

        <!-- Plots Section -->
        <section class="plots-section">
            <div id="plotsContainer" class="plots-container">
                <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </section>
        </div>
        <!-- End Main Content -->

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="loading hidden">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>

    <!-- Error Message -->
    <div id="errorMessage" class="error-message hidden"></div>

    <!-- Import Modal -->
    <div id="importModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
                <button class="modal-close" id="closeImportModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-section">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ CSV –∏–ª–∏ Excel —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Ü–µ–Ω–∫–∞—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.</p>
                    <p class="import-hint">–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏: student_id, student_name, subject, grade, date</p>
                </div>
                <div class="import-section">
                    <label for="fileInput" class="file-input-label">
                        <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" style="display: none;">
                        <span class="file-input-button">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</span>
                        <span id="fileName" class="file-name">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
                    </label>
                </div>
                <div id="importPreview" class="import-preview hidden"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelImportBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmImportBtn" class="btn-primary" disabled>–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì• –≠–∫—Å–ø–æ—Ä—Ç</h2>
                <button class="modal-close" id="closeModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="export-section">
                    <h3>–≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤:</h3>
                    <div id="plotsCheckboxes" class="checkboxes-container">
                        <!-- –ß–µ–∫–±–æ–∫—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                    <div class="select-all-container">
                        <label class="checkbox-label">
                            <input type="checkbox" id="selectAllPlots">
                            <span>–í—ã–±—Ä–∞—Ç—å –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏</span>
                        </label>
                    </div>
                </div>
                <div class="export-section">
                    <h3>–§–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤:</h3>
                    <div id="formatsCheckboxes" class="checkboxes-container">
                        <label class="checkbox-label">
                            <input type="checkbox" name="format" value="png" checked>
                            <span>üñºÔ∏è PNG (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="format" value="svg">
                            <span>üìê SVG (–≤–µ–∫—Ç–æ—Ä–Ω–æ–µ)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="format" value="html">
                            <span>üåê HTML (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="format" value="json">
                            <span>üìÑ JSON (–¥–∞–Ω–Ω—ã–µ)</span>
                        </label>
                    </div>
                    <div class="select-all-container">
                        <label class="checkbox-label">
                            <input type="checkbox" id="selectAllFormats">
                            <span>–í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</span>
                        </label>
                    </div>
                </div>
                <div class="export-section">
                    <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:</h3>
                    <div id="dataExportCheckboxes" class="checkboxes-container">
                        <label class="checkbox-label">
                            <input type="checkbox" name="dataFormat" value="csv">
                            <span>üìÑ CSV (—Ç–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="dataFormat" value="pdf">
                            <span>üìë PDF (–æ—Ç—á–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π)</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelExportBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmExportBtn" class="btn-primary">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
